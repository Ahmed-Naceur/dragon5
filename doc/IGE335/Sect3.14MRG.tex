\subsection{The \moc{MRG:} module}\label{sect:MRGData}


The \moc{MRG:} module is used to pre-homogenize a geometry after it has been tracked with the \moc{EXCELT:} module. This module can also be used for
the same purpose for \moc{NXT:} tracked geometries.\cite{MRG1,MRG2,Harrisson2011a} In addition, \moc{NXT:} based tracking files can
also be partition using this module. 

The general specifications for this module are presented in \Tabto{MRGDataexcelt}{PARTDatanxtfil}

\begin{DataStructure}{Structure for merging \moc{EXCELT:} tracks}\label{tab:MRGDataexcelt}
\dusa{TRKENEW} \dusa{TFILENEW}
\moc{:=} \moc{MRG:}   \dusa{TRKEOLD} \dusa{TFILEOLD} \moc{::}  \dstr{descmrg} 
\end{DataStructure}

\begin{DataStructure}{Structure for merging \moc{NXT:} tracks}\label{tab:MRGDatanxttrk}
\dusa{TRKNNEW} \moc{:=} \moc{MRG:}   \dusa{TRKNOLD} \moc{::}  \dstr{descmrg} 
\end{DataStructure}

\begin{DataStructure}{Structure for partitioning \moc{NXT:} tracking files}\label{tab:PARTDatanxtfil}
\dusa{TFILEMOD} \dusa{TFILEEXT} \moc{:=} \moc{MRG:}   \dusa{TRKNOLD} \dusa{TFILEOLD} \moc{::}  \dstr{descextr} 
\end{DataStructure}

\begin{ListeDeDescription}{mmmmmmmm}  

\item[\dusa{TRKENEW}] \verb|character*12| name of the new \dds{tracking} data structure that will contain
region volume and surface area vectors in addition to region identification pointers and other tracking
information after the pre-homogenization process.

\item[\dusa{TFILENEW}] \verb|character*12| name of the new \moc{EXCELT:} compatible sequential binary tracking file used to store
the tracks lengths after the pre-homogenization process has take place. 

\item[\dusa{TFILEMOD}] \verb|character*12| name of the new \moc{NXT:} sequential binary tracking file where the
lines not-associated with the regions to extract are stored.

\item[\dusa{TFILEEXT}] \verb|character*12| name of the new \moc{NXT:} compatible sequential binary tracking file where the
lines associated with the regions to extract are stored.

\item[\dusa{TRKEOLD}] \verb|character*12| name of the \dds{tracking} data structure that contains
region volume and surface area vectors in addition to region identification pointers and other tracking
information before the pre-homogenization process.

\item[\dusa{TFILEOLD}] \verb|character*12| name of the old sequential binary tracking file used to store
the tracks lengths before the pre-homogenization process takes place. 

\item[\dstr{descmrg}] structure containing the input data to this module (see \Sect{descmrg}).

\item[\dstr{descextr}] structure containing the input data for track file partitioning process (see \Sect{descextr}).

\end{ListeDeDescription}


\subsubsection{Data input for geometry pre-homogenization}\label{sect:descmrg}

\begin{DataStructure}{Structure \dstr{descmrg}}
$[$ \moc{EDIT} \dusa{iprint} $]$ \\
$[$ \moc{REGI} (\dusa{irmrg}($i$), $i$=1,\dusa{nreg}) $]$ \\
$[$ \moc{SURF} (\dusa{ismrg}($i$), $i$=1,\dusa{nsur}) $]$ 
\end{DataStructure}

\begin{ListeDeDescription}{mmmmmmmm}   

\item[\moc{EDIT}] keyword used to modify the print level \dusa{iprint}.

\item[\dusa{iprint}] index used to control the printing in this module. 

\item[\moc{REGI}] keyword to specify that regions will be pre-homogenized.

\item[\dusa{irmrg}] list of new region numbers associated with old region numbers. Two or more regions can be
combined together only if they contain the same mixture. The number \dusa{nreg} of region is that printed
after the execution of the tracking module.

\item[\moc{SURF}] keyword to specify that surfaces will be pre-homogenized.

\item[\dusa{ismrg}] list of new surface numbers associated with old surface numbers. Two or more surfaces can be
combined together only if they are associated with the same boundary conditions. The number \dusa{nsur} of surfaces is
that printed after the execution of the tracking module.

\end{ListeDeDescription}

\subsubsection{Data input for tracking file partitioning}\label{sect:descextr}

\begin{DataStructure}{Structure \dstr{descextr}}
$[$ \moc{EDIT} \dusa{iprint} $]$ \\
$[$ \moc{EXTR} (\dusa{iext}($i$), $i$=1,\dusa{nreg}) $]$ \\
\end{DataStructure}

\noindent
 where

\begin{ListeDeDescription}{mmmmmmmm}   

\item[\moc{EDIT}] keyword used to modify the print level \dusa{iprint}.

\item[\dusa{iprint}] index used to control the printing in this module.

\item[\moc{EXTR}] keyword to specify that the track associated with a specific set of regions will be extracted from
the reference tracking file.

\item[\dusa{iext}] list of region numbers for track extraction. The number nreg of region is that printed after the execution
of the tracking module.

\end{ListeDeDescription}

\eject
